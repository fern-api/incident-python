# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.alert_route_alert_source_payload_v2 import AlertRouteAlertSourcePayloadV2
from ..types.alert_route_channel_config_payload_v2 import AlertRouteChannelConfigPayloadV2
from ..types.alert_route_escalation_config_payload_v2 import AlertRouteEscalationConfigPayloadV2
from ..types.alert_route_incident_config_payload_v2 import AlertRouteIncidentConfigPayloadV2
from ..types.alert_route_incident_template_payload_v2 import AlertRouteIncidentTemplatePayloadV2
from ..types.alert_routes_create_result_v2 import AlertRoutesCreateResultV2
from ..types.alert_routes_list_result_v2 import AlertRoutesListResultV2
from ..types.alert_routes_show_result_v2 import AlertRoutesShowResultV2
from ..types.alert_routes_update_result_v2 import AlertRoutesUpdateResultV2
from ..types.condition_group_payload_v2 import ConditionGroupPayloadV2
from ..types.expression_payload_v2 import ExpressionPayloadV2
from .raw_client import AsyncRawAlertRoutesV2Client, RawAlertRoutesV2Client

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class AlertRoutesV2Client:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawAlertRoutesV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawAlertRoutesV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawAlertRoutesV2Client
        """
        return self._raw_client

    def list(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesListResultV2:
        """
        List all alert routes in your account.

        Parameters
        ----------
        page_size : int
            Number of alert routes to return per page

        after : typing.Optional[str]
            The ID of the last alert route on the previous page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesListResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_routes_v2.list(
            page_size=25,
            after="01FCNDV6P870EA6S7TK1DSYDG0",
        )
        """
        _response = self._raw_client.list(page_size=page_size, after=after, request_options=request_options)
        return _response.data

    def create(
        self,
        *,
        alert_sources: typing.Sequence[AlertRouteAlertSourcePayloadV2],
        channel_config: typing.Sequence[AlertRouteChannelConfigPayloadV2],
        condition_groups: typing.Sequence[ConditionGroupPayloadV2],
        enabled: bool,
        escalation_config: AlertRouteEscalationConfigPayloadV2,
        expressions: typing.Sequence[ExpressionPayloadV2],
        incident_config: AlertRouteIncidentConfigPayloadV2,
        incident_template: AlertRouteIncidentTemplatePayloadV2,
        is_private: bool,
        name: str,
        version: int,
        created_at: typing.Optional[dt.datetime] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        updated_at: typing.Optional[dt.datetime] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesCreateResultV2:
        """
        Create a new alert route in your account.

        Parameters
        ----------
        alert_sources : typing.Sequence[AlertRouteAlertSourcePayloadV2]
            Which alert sources should this alert route match?

        channel_config : typing.Sequence[AlertRouteChannelConfigPayloadV2]
            The channel configuration for this alert route

        condition_groups : typing.Sequence[ConditionGroupPayloadV2]
            What condition groups must be true for this alert route to fire?

        enabled : bool
            Whether this alert route is enabled or not

        escalation_config : AlertRouteEscalationConfigPayloadV2

        expressions : typing.Sequence[ExpressionPayloadV2]
            The expressions used in this template

        incident_config : AlertRouteIncidentConfigPayloadV2

        incident_template : AlertRouteIncidentTemplatePayloadV2

        is_private : bool
            Whether this alert route is private. Private alert routes will only create private incidents from alerts.

        name : str
            The name of this alert route config, for the user's reference

        version : int
            The version of this alert route config

        created_at : typing.Optional[dt.datetime]
            The time of creation of this alert route

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert route

        updated_at : typing.Optional[dt.datetime]
            The time of last update of this alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesCreateResultV2
            Created response.

        Examples
        --------
        import datetime

        from fern import (
            AlertRouteAlertSourcePayloadV2,
            AlertRouteAutoGeneratedTemplateBindingPayloadV2,
            AlertRouteChannelConfigPayloadV2,
            AlertRouteChannelTargetPayloadV2,
            AlertRouteCustomFieldBindingPayloadV2,
            AlertRouteEscalationConfigPayloadV2,
            AlertRouteEscalationTargetPayloadV2,
            AlertRouteIncidentConfigPayloadV2,
            AlertRouteIncidentTemplatePayloadV2,
            AlertRouteSeverityBindingPayloadV2,
            AlertRouteTemplateBindingPayloadV2,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            GroupingKeyV2,
            IncidentIO,
            ReturnsMetaV2,
        )

        client = IncidentIO()
        client.alert_routes_v2.create(
            alert_sources=[
                AlertRouteAlertSourcePayloadV2(
                    alert_source_id="01FCNDV6P870EA6S7TK1DSYDG0",
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                )
            ],
            channel_config=[
                AlertRouteChannelConfigPayloadV2(
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                    ms_teams_targets=AlertRouteChannelTargetPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        channel_visibility="abc123",
                    ),
                    slack_targets=AlertRouteChannelTargetPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        channel_visibility="abc123",
                    ),
                )
            ],
            condition_groups=[
                ConditionGroupPayloadV2(
                    conditions=[
                        ConditionPayloadV2(
                            operation="one_of",
                            param_bindings=[
                                EngineParamBindingPayloadV2(
                                    array_value=[
                                        EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        )
                                    ],
                                    value=EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    ),
                                )
                            ],
                            subject="incident.severity",
                        )
                    ],
                )
            ],
            created_at=datetime.datetime.fromisoformat(
                "2021-08-17 13:28:57+00:00",
            ),
            enabled=False,
            escalation_config=AlertRouteEscalationConfigPayloadV2(
                auto_cancel_escalations=False,
                escalation_targets=[
                    AlertRouteEscalationTargetPayloadV2(
                        escalation_paths=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        users=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    )
                ],
            ),
            expressions=[
                ExpressionPayloadV2(
                    else_branch=ExpressionElseBranchPayloadV2(
                        result=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    label="Team Slack channel",
                    operations=[
                        ExpressionOperationPayloadV2(
                            branches=ExpressionBranchesOptsPayloadV2(
                                branches=[
                                    ExpressionBranchPayloadV2(
                                        condition_groups=[
                                            ConditionGroupPayloadV2(
                                                conditions=[
                                                    ConditionPayloadV2(
                                                        operation="one_of",
                                                        param_bindings=[
                                                            EngineParamBindingPayloadV2(
                                                                array_value=[
                                                                    EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    )
                                                                ],
                                                                value=EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                ),
                                                            )
                                                        ],
                                                        subject="incident.severity",
                                                    )
                                                ],
                                            )
                                        ],
                                        result=EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        ),
                                    )
                                ],
                                returns=ReturnsMetaV2(
                                    array=True,
                                    type="IncidentStatus",
                                ),
                            ),
                            concatenate=ExpressionConcatenateOptsPayloadV2(
                                reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                            ),
                            filter=ExpressionFilterOptsPayloadV2(
                                condition_groups=[
                                    ConditionGroupPayloadV2(
                                        conditions=[
                                            ConditionPayloadV2(
                                                operation="one_of",
                                                param_bindings=[
                                                    EngineParamBindingPayloadV2(
                                                        array_value=[
                                                            EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            )
                                                        ],
                                                        value=EngineParamBindingValuePayloadV2(
                                                            literal="SEV123",
                                                            reference="incident.severity",
                                                        ),
                                                    )
                                                ],
                                                subject="incident.severity",
                                            )
                                        ],
                                    )
                                ],
                            ),
                            navigate=ExpressionNavigateOptsPayloadV2(
                                reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                            ),
                            operation_type="navigate",
                            parse=ExpressionParseOptsPayloadV2(
                                returns=ReturnsMetaV2(
                                    array=True,
                                    type="IncidentStatus",
                                ),
                                source='metadata.annotations["github.com/repo"]',
                            ),
                        )
                    ],
                    reference="abc123",
                    root_reference="incident.status",
                )
            ],
            incident_config=AlertRouteIncidentConfigPayloadV2(
                auto_decline_enabled=False,
                auto_relate_grouped_alerts=False,
                condition_groups=[
                    ConditionGroupPayloadV2(
                        conditions=[
                            ConditionPayloadV2(
                                operation="one_of",
                                param_bindings=[
                                    EngineParamBindingPayloadV2(
                                        array_value=[
                                            EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            )
                                        ],
                                        value=EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        ),
                                    )
                                ],
                                subject="incident.severity",
                            )
                        ],
                    )
                ],
                defer_time_seconds=1,
                enabled=False,
                grouping_keys=[
                    GroupingKeyV2(
                        reference="alert.title",
                    )
                ],
                grouping_window_seconds=1,
            ),
            incident_template=AlertRouteIncidentTemplatePayloadV2(
                custom_fields=[
                    AlertRouteCustomFieldBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        custom_field_id="01FCNDV6P870EA6S7TK1DSYDG0",
                        merge_strategy="first-wins",
                    )
                ],
                incident_mode=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                incident_type=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                name=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                    autogenerated=False,
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                severity=AlertRouteSeverityBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                    merge_strategy="first-wins",
                ),
                start_in_triage=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                summary=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                    autogenerated=False,
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                workspace=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
            ),
            is_private=False,
            name="Production incidents",
            owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
            updated_at=datetime.datetime.fromisoformat(
                "2021-08-17 13:28:57+00:00",
            ),
            version=1,
        )
        """
        _response = self._raw_client.create(
            alert_sources=alert_sources,
            channel_config=channel_config,
            condition_groups=condition_groups,
            enabled=enabled,
            escalation_config=escalation_config,
            expressions=expressions,
            incident_config=incident_config,
            incident_template=incident_template,
            is_private=is_private,
            name=name,
            version=version,
            created_at=created_at,
            owning_team_ids=owning_team_ids,
            updated_at=updated_at,
            request_options=request_options,
        )
        return _response.data

    def show(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> AlertRoutesShowResultV2:
        """
        Load details about a specific alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesShowResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_routes_v2.show(
            id="01FCNDV6P870EA6S7TK1DSYDG0",
        )
        """
        _response = self._raw_client.show(id, request_options=request_options)
        return _response.data

    def update(
        self,
        id: str,
        *,
        alert_sources: typing.Sequence[AlertRouteAlertSourcePayloadV2],
        channel_config: typing.Sequence[AlertRouteChannelConfigPayloadV2],
        condition_groups: typing.Sequence[ConditionGroupPayloadV2],
        enabled: bool,
        escalation_config: AlertRouteEscalationConfigPayloadV2,
        expressions: typing.Sequence[ExpressionPayloadV2],
        incident_config: AlertRouteIncidentConfigPayloadV2,
        incident_template: AlertRouteIncidentTemplatePayloadV2,
        is_private: bool,
        name: str,
        version: int,
        created_at: typing.Optional[dt.datetime] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        updated_at: typing.Optional[dt.datetime] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesUpdateResultV2:
        """
        Update an existing alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        alert_sources : typing.Sequence[AlertRouteAlertSourcePayloadV2]
            Which alert sources should this alert route match?

        channel_config : typing.Sequence[AlertRouteChannelConfigPayloadV2]
            The channel configuration for this alert route

        condition_groups : typing.Sequence[ConditionGroupPayloadV2]
            What condition groups must be true for this alert route to fire?

        enabled : bool
            Whether this alert route is enabled or not

        escalation_config : AlertRouteEscalationConfigPayloadV2

        expressions : typing.Sequence[ExpressionPayloadV2]
            The expressions used in this template

        incident_config : AlertRouteIncidentConfigPayloadV2

        incident_template : AlertRouteIncidentTemplatePayloadV2

        is_private : bool
            Whether this alert route is private. Private alert routes will only create private incidents from alerts.

        name : str
            The name of this alert route config, for the user's reference

        version : int
            The version of this alert route config

        created_at : typing.Optional[dt.datetime]
            The time of creation of this alert route

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert route

        updated_at : typing.Optional[dt.datetime]
            The time of last update of this alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesUpdateResultV2
            OK response.

        Examples
        --------
        import datetime

        from fern import (
            AlertRouteAlertSourcePayloadV2,
            AlertRouteAutoGeneratedTemplateBindingPayloadV2,
            AlertRouteChannelConfigPayloadV2,
            AlertRouteChannelTargetPayloadV2,
            AlertRouteCustomFieldBindingPayloadV2,
            AlertRouteEscalationConfigPayloadV2,
            AlertRouteEscalationTargetPayloadV2,
            AlertRouteIncidentConfigPayloadV2,
            AlertRouteIncidentTemplatePayloadV2,
            AlertRouteSeverityBindingPayloadV2,
            AlertRouteTemplateBindingPayloadV2,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            GroupingKeyV2,
            IncidentIO,
            ReturnsMetaV2,
        )

        client = IncidentIO()
        client.alert_routes_v2.update(
            id="01FCNDV6P870EA6S7TK1DSYDG0",
            alert_sources=[
                AlertRouteAlertSourcePayloadV2(
                    alert_source_id="01FCNDV6P870EA6S7TK1DSYDG0",
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                )
            ],
            channel_config=[
                AlertRouteChannelConfigPayloadV2(
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                    ms_teams_targets=AlertRouteChannelTargetPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        channel_visibility="abc123",
                    ),
                    slack_targets=AlertRouteChannelTargetPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        channel_visibility="abc123",
                    ),
                )
            ],
            condition_groups=[
                ConditionGroupPayloadV2(
                    conditions=[
                        ConditionPayloadV2(
                            operation="one_of",
                            param_bindings=[
                                EngineParamBindingPayloadV2(
                                    array_value=[
                                        EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        )
                                    ],
                                    value=EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    ),
                                )
                            ],
                            subject="incident.severity",
                        )
                    ],
                )
            ],
            created_at=datetime.datetime.fromisoformat(
                "2021-08-17 13:28:57+00:00",
            ),
            enabled=False,
            escalation_config=AlertRouteEscalationConfigPayloadV2(
                auto_cancel_escalations=False,
                escalation_targets=[
                    AlertRouteEscalationTargetPayloadV2(
                        escalation_paths=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        users=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    )
                ],
            ),
            expressions=[
                ExpressionPayloadV2(
                    else_branch=ExpressionElseBranchPayloadV2(
                        result=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    label="Team Slack channel",
                    operations=[
                        ExpressionOperationPayloadV2(
                            branches=ExpressionBranchesOptsPayloadV2(
                                branches=[
                                    ExpressionBranchPayloadV2(
                                        condition_groups=[
                                            ConditionGroupPayloadV2(
                                                conditions=[
                                                    ConditionPayloadV2(
                                                        operation="one_of",
                                                        param_bindings=[
                                                            EngineParamBindingPayloadV2(
                                                                array_value=[
                                                                    EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    )
                                                                ],
                                                                value=EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                ),
                                                            )
                                                        ],
                                                        subject="incident.severity",
                                                    )
                                                ],
                                            )
                                        ],
                                        result=EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        ),
                                    )
                                ],
                                returns=ReturnsMetaV2(
                                    array=True,
                                    type="IncidentStatus",
                                ),
                            ),
                            concatenate=ExpressionConcatenateOptsPayloadV2(
                                reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                            ),
                            filter=ExpressionFilterOptsPayloadV2(
                                condition_groups=[
                                    ConditionGroupPayloadV2(
                                        conditions=[
                                            ConditionPayloadV2(
                                                operation="one_of",
                                                param_bindings=[
                                                    EngineParamBindingPayloadV2(
                                                        array_value=[
                                                            EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            )
                                                        ],
                                                        value=EngineParamBindingValuePayloadV2(
                                                            literal="SEV123",
                                                            reference="incident.severity",
                                                        ),
                                                    )
                                                ],
                                                subject="incident.severity",
                                            )
                                        ],
                                    )
                                ],
                            ),
                            navigate=ExpressionNavigateOptsPayloadV2(
                                reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                            ),
                            operation_type="navigate",
                            parse=ExpressionParseOptsPayloadV2(
                                returns=ReturnsMetaV2(
                                    array=True,
                                    type="IncidentStatus",
                                ),
                                source='metadata.annotations["github.com/repo"]',
                            ),
                        )
                    ],
                    reference="abc123",
                    root_reference="incident.status",
                )
            ],
            incident_config=AlertRouteIncidentConfigPayloadV2(
                auto_decline_enabled=False,
                auto_relate_grouped_alerts=False,
                condition_groups=[
                    ConditionGroupPayloadV2(
                        conditions=[
                            ConditionPayloadV2(
                                operation="one_of",
                                param_bindings=[
                                    EngineParamBindingPayloadV2(
                                        array_value=[
                                            EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            )
                                        ],
                                        value=EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        ),
                                    )
                                ],
                                subject="incident.severity",
                            )
                        ],
                    )
                ],
                defer_time_seconds=1,
                enabled=False,
                grouping_keys=[
                    GroupingKeyV2(
                        reference="alert.title",
                    )
                ],
                grouping_window_seconds=1,
            ),
            incident_template=AlertRouteIncidentTemplatePayloadV2(
                custom_fields=[
                    AlertRouteCustomFieldBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        custom_field_id="01FCNDV6P870EA6S7TK1DSYDG0",
                        merge_strategy="first-wins",
                    )
                ],
                incident_mode=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                incident_type=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                name=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                    autogenerated=False,
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                severity=AlertRouteSeverityBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                    merge_strategy="first-wins",
                ),
                start_in_triage=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                summary=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                    autogenerated=False,
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
                workspace=AlertRouteTemplateBindingPayloadV2(
                    binding=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
            ),
            is_private=False,
            name="Production incidents",
            owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
            updated_at=datetime.datetime.fromisoformat(
                "2021-08-17 13:28:57+00:00",
            ),
            version=1,
        )
        """
        _response = self._raw_client.update(
            id,
            alert_sources=alert_sources,
            channel_config=channel_config,
            condition_groups=condition_groups,
            enabled=enabled,
            escalation_config=escalation_config,
            expressions=expressions,
            incident_config=incident_config,
            incident_template=incident_template,
            is_private=is_private,
            name=name,
            version=version,
            created_at=created_at,
            owning_team_ids=owning_team_ids,
            updated_at=updated_at,
            request_options=request_options,
        )
        return _response.data

    def delete(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        Delete an existing alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_routes_v2.delete(
            id="01FCNDV6P870EA6S7TK1DSYDG0",
        )
        """
        _response = self._raw_client.delete(id, request_options=request_options)
        return _response.data


class AsyncAlertRoutesV2Client:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawAlertRoutesV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawAlertRoutesV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawAlertRoutesV2Client
        """
        return self._raw_client

    async def list(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesListResultV2:
        """
        List all alert routes in your account.

        Parameters
        ----------
        page_size : int
            Number of alert routes to return per page

        after : typing.Optional[str]
            The ID of the last alert route on the previous page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesListResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_routes_v2.list(
                page_size=25,
                after="01FCNDV6P870EA6S7TK1DSYDG0",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.list(page_size=page_size, after=after, request_options=request_options)
        return _response.data

    async def create(
        self,
        *,
        alert_sources: typing.Sequence[AlertRouteAlertSourcePayloadV2],
        channel_config: typing.Sequence[AlertRouteChannelConfigPayloadV2],
        condition_groups: typing.Sequence[ConditionGroupPayloadV2],
        enabled: bool,
        escalation_config: AlertRouteEscalationConfigPayloadV2,
        expressions: typing.Sequence[ExpressionPayloadV2],
        incident_config: AlertRouteIncidentConfigPayloadV2,
        incident_template: AlertRouteIncidentTemplatePayloadV2,
        is_private: bool,
        name: str,
        version: int,
        created_at: typing.Optional[dt.datetime] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        updated_at: typing.Optional[dt.datetime] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesCreateResultV2:
        """
        Create a new alert route in your account.

        Parameters
        ----------
        alert_sources : typing.Sequence[AlertRouteAlertSourcePayloadV2]
            Which alert sources should this alert route match?

        channel_config : typing.Sequence[AlertRouteChannelConfigPayloadV2]
            The channel configuration for this alert route

        condition_groups : typing.Sequence[ConditionGroupPayloadV2]
            What condition groups must be true for this alert route to fire?

        enabled : bool
            Whether this alert route is enabled or not

        escalation_config : AlertRouteEscalationConfigPayloadV2

        expressions : typing.Sequence[ExpressionPayloadV2]
            The expressions used in this template

        incident_config : AlertRouteIncidentConfigPayloadV2

        incident_template : AlertRouteIncidentTemplatePayloadV2

        is_private : bool
            Whether this alert route is private. Private alert routes will only create private incidents from alerts.

        name : str
            The name of this alert route config, for the user's reference

        version : int
            The version of this alert route config

        created_at : typing.Optional[dt.datetime]
            The time of creation of this alert route

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert route

        updated_at : typing.Optional[dt.datetime]
            The time of last update of this alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesCreateResultV2
            Created response.

        Examples
        --------
        import asyncio
        import datetime

        from fern import (
            AlertRouteAlertSourcePayloadV2,
            AlertRouteAutoGeneratedTemplateBindingPayloadV2,
            AlertRouteChannelConfigPayloadV2,
            AlertRouteChannelTargetPayloadV2,
            AlertRouteCustomFieldBindingPayloadV2,
            AlertRouteEscalationConfigPayloadV2,
            AlertRouteEscalationTargetPayloadV2,
            AlertRouteIncidentConfigPayloadV2,
            AlertRouteIncidentTemplatePayloadV2,
            AlertRouteSeverityBindingPayloadV2,
            AlertRouteTemplateBindingPayloadV2,
            AsyncIncidentIO,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            GroupingKeyV2,
            ReturnsMetaV2,
        )

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_routes_v2.create(
                alert_sources=[
                    AlertRouteAlertSourcePayloadV2(
                        alert_source_id="01FCNDV6P870EA6S7TK1DSYDG0",
                        condition_groups=[
                            ConditionGroupPayloadV2(
                                conditions=[
                                    ConditionPayloadV2(
                                        operation="one_of",
                                        param_bindings=[
                                            EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            )
                                        ],
                                        subject="incident.severity",
                                    )
                                ],
                            )
                        ],
                    )
                ],
                channel_config=[
                    AlertRouteChannelConfigPayloadV2(
                        condition_groups=[
                            ConditionGroupPayloadV2(
                                conditions=[
                                    ConditionPayloadV2(
                                        operation="one_of",
                                        param_bindings=[
                                            EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            )
                                        ],
                                        subject="incident.severity",
                                    )
                                ],
                            )
                        ],
                        ms_teams_targets=AlertRouteChannelTargetPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            channel_visibility="abc123",
                        ),
                        slack_targets=AlertRouteChannelTargetPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            channel_visibility="abc123",
                        ),
                    )
                ],
                condition_groups=[
                    ConditionGroupPayloadV2(
                        conditions=[
                            ConditionPayloadV2(
                                operation="one_of",
                                param_bindings=[
                                    EngineParamBindingPayloadV2(
                                        array_value=[
                                            EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            )
                                        ],
                                        value=EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        ),
                                    )
                                ],
                                subject="incident.severity",
                            )
                        ],
                    )
                ],
                created_at=datetime.datetime.fromisoformat(
                    "2021-08-17 13:28:57+00:00",
                ),
                enabled=False,
                escalation_config=AlertRouteEscalationConfigPayloadV2(
                    auto_cancel_escalations=False,
                    escalation_targets=[
                        AlertRouteEscalationTargetPayloadV2(
                            escalation_paths=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            users=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        )
                    ],
                ),
                expressions=[
                    ExpressionPayloadV2(
                        else_branch=ExpressionElseBranchPayloadV2(
                            result=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        ),
                        label="Team Slack channel",
                        operations=[
                            ExpressionOperationPayloadV2(
                                branches=ExpressionBranchesOptsPayloadV2(
                                    branches=[
                                        ExpressionBranchPayloadV2(
                                            condition_groups=[
                                                ConditionGroupPayloadV2(
                                                    conditions=[
                                                        ConditionPayloadV2(
                                                            operation="one_of",
                                                            param_bindings=[
                                                                EngineParamBindingPayloadV2(
                                                                    array_value=[
                                                                        EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        )
                                                                    ],
                                                                    value=EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    ),
                                                                )
                                                            ],
                                                            subject="incident.severity",
                                                        )
                                                    ],
                                                )
                                            ],
                                            result=EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            ),
                                        )
                                    ],
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                ),
                                concatenate=ExpressionConcatenateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                filter=ExpressionFilterOptsPayloadV2(
                                    condition_groups=[
                                        ConditionGroupPayloadV2(
                                            conditions=[
                                                ConditionPayloadV2(
                                                    operation="one_of",
                                                    param_bindings=[
                                                        EngineParamBindingPayloadV2(
                                                            array_value=[
                                                                EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                )
                                                            ],
                                                            value=EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            ),
                                                        )
                                                    ],
                                                    subject="incident.severity",
                                                )
                                            ],
                                        )
                                    ],
                                ),
                                navigate=ExpressionNavigateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                operation_type="navigate",
                                parse=ExpressionParseOptsPayloadV2(
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                    source='metadata.annotations["github.com/repo"]',
                                ),
                            )
                        ],
                        reference="abc123",
                        root_reference="incident.status",
                    )
                ],
                incident_config=AlertRouteIncidentConfigPayloadV2(
                    auto_decline_enabled=False,
                    auto_relate_grouped_alerts=False,
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                    defer_time_seconds=1,
                    enabled=False,
                    grouping_keys=[
                        GroupingKeyV2(
                            reference="alert.title",
                        )
                    ],
                    grouping_window_seconds=1,
                ),
                incident_template=AlertRouteIncidentTemplatePayloadV2(
                    custom_fields=[
                        AlertRouteCustomFieldBindingPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            custom_field_id="01FCNDV6P870EA6S7TK1DSYDG0",
                            merge_strategy="first-wins",
                        )
                    ],
                    incident_mode=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    incident_type=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    name=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                        autogenerated=False,
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    severity=AlertRouteSeverityBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        merge_strategy="first-wins",
                    ),
                    start_in_triage=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    summary=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                        autogenerated=False,
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    workspace=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                ),
                is_private=False,
                name="Production incidents",
                owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
                updated_at=datetime.datetime.fromisoformat(
                    "2021-08-17 13:28:57+00:00",
                ),
                version=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            alert_sources=alert_sources,
            channel_config=channel_config,
            condition_groups=condition_groups,
            enabled=enabled,
            escalation_config=escalation_config,
            expressions=expressions,
            incident_config=incident_config,
            incident_template=incident_template,
            is_private=is_private,
            name=name,
            version=version,
            created_at=created_at,
            owning_team_ids=owning_team_ids,
            updated_at=updated_at,
            request_options=request_options,
        )
        return _response.data

    async def show(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AlertRoutesShowResultV2:
        """
        Load details about a specific alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesShowResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_routes_v2.show(
                id="01FCNDV6P870EA6S7TK1DSYDG0",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.show(id, request_options=request_options)
        return _response.data

    async def update(
        self,
        id: str,
        *,
        alert_sources: typing.Sequence[AlertRouteAlertSourcePayloadV2],
        channel_config: typing.Sequence[AlertRouteChannelConfigPayloadV2],
        condition_groups: typing.Sequence[ConditionGroupPayloadV2],
        enabled: bool,
        escalation_config: AlertRouteEscalationConfigPayloadV2,
        expressions: typing.Sequence[ExpressionPayloadV2],
        incident_config: AlertRouteIncidentConfigPayloadV2,
        incident_template: AlertRouteIncidentTemplatePayloadV2,
        is_private: bool,
        name: str,
        version: int,
        created_at: typing.Optional[dt.datetime] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        updated_at: typing.Optional[dt.datetime] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertRoutesUpdateResultV2:
        """
        Update an existing alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        alert_sources : typing.Sequence[AlertRouteAlertSourcePayloadV2]
            Which alert sources should this alert route match?

        channel_config : typing.Sequence[AlertRouteChannelConfigPayloadV2]
            The channel configuration for this alert route

        condition_groups : typing.Sequence[ConditionGroupPayloadV2]
            What condition groups must be true for this alert route to fire?

        enabled : bool
            Whether this alert route is enabled or not

        escalation_config : AlertRouteEscalationConfigPayloadV2

        expressions : typing.Sequence[ExpressionPayloadV2]
            The expressions used in this template

        incident_config : AlertRouteIncidentConfigPayloadV2

        incident_template : AlertRouteIncidentTemplatePayloadV2

        is_private : bool
            Whether this alert route is private. Private alert routes will only create private incidents from alerts.

        name : str
            The name of this alert route config, for the user's reference

        version : int
            The version of this alert route config

        created_at : typing.Optional[dt.datetime]
            The time of creation of this alert route

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert route

        updated_at : typing.Optional[dt.datetime]
            The time of last update of this alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertRoutesUpdateResultV2
            OK response.

        Examples
        --------
        import asyncio
        import datetime

        from fern import (
            AlertRouteAlertSourcePayloadV2,
            AlertRouteAutoGeneratedTemplateBindingPayloadV2,
            AlertRouteChannelConfigPayloadV2,
            AlertRouteChannelTargetPayloadV2,
            AlertRouteCustomFieldBindingPayloadV2,
            AlertRouteEscalationConfigPayloadV2,
            AlertRouteEscalationTargetPayloadV2,
            AlertRouteIncidentConfigPayloadV2,
            AlertRouteIncidentTemplatePayloadV2,
            AlertRouteSeverityBindingPayloadV2,
            AlertRouteTemplateBindingPayloadV2,
            AsyncIncidentIO,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            GroupingKeyV2,
            ReturnsMetaV2,
        )

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_routes_v2.update(
                id="01FCNDV6P870EA6S7TK1DSYDG0",
                alert_sources=[
                    AlertRouteAlertSourcePayloadV2(
                        alert_source_id="01FCNDV6P870EA6S7TK1DSYDG0",
                        condition_groups=[
                            ConditionGroupPayloadV2(
                                conditions=[
                                    ConditionPayloadV2(
                                        operation="one_of",
                                        param_bindings=[
                                            EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            )
                                        ],
                                        subject="incident.severity",
                                    )
                                ],
                            )
                        ],
                    )
                ],
                channel_config=[
                    AlertRouteChannelConfigPayloadV2(
                        condition_groups=[
                            ConditionGroupPayloadV2(
                                conditions=[
                                    ConditionPayloadV2(
                                        operation="one_of",
                                        param_bindings=[
                                            EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            )
                                        ],
                                        subject="incident.severity",
                                    )
                                ],
                            )
                        ],
                        ms_teams_targets=AlertRouteChannelTargetPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            channel_visibility="abc123",
                        ),
                        slack_targets=AlertRouteChannelTargetPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            channel_visibility="abc123",
                        ),
                    )
                ],
                condition_groups=[
                    ConditionGroupPayloadV2(
                        conditions=[
                            ConditionPayloadV2(
                                operation="one_of",
                                param_bindings=[
                                    EngineParamBindingPayloadV2(
                                        array_value=[
                                            EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            )
                                        ],
                                        value=EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        ),
                                    )
                                ],
                                subject="incident.severity",
                            )
                        ],
                    )
                ],
                created_at=datetime.datetime.fromisoformat(
                    "2021-08-17 13:28:57+00:00",
                ),
                enabled=False,
                escalation_config=AlertRouteEscalationConfigPayloadV2(
                    auto_cancel_escalations=False,
                    escalation_targets=[
                        AlertRouteEscalationTargetPayloadV2(
                            escalation_paths=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            users=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        )
                    ],
                ),
                expressions=[
                    ExpressionPayloadV2(
                        else_branch=ExpressionElseBranchPayloadV2(
                            result=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        ),
                        label="Team Slack channel",
                        operations=[
                            ExpressionOperationPayloadV2(
                                branches=ExpressionBranchesOptsPayloadV2(
                                    branches=[
                                        ExpressionBranchPayloadV2(
                                            condition_groups=[
                                                ConditionGroupPayloadV2(
                                                    conditions=[
                                                        ConditionPayloadV2(
                                                            operation="one_of",
                                                            param_bindings=[
                                                                EngineParamBindingPayloadV2(
                                                                    array_value=[
                                                                        EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        )
                                                                    ],
                                                                    value=EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    ),
                                                                )
                                                            ],
                                                            subject="incident.severity",
                                                        )
                                                    ],
                                                )
                                            ],
                                            result=EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            ),
                                        )
                                    ],
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                ),
                                concatenate=ExpressionConcatenateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                filter=ExpressionFilterOptsPayloadV2(
                                    condition_groups=[
                                        ConditionGroupPayloadV2(
                                            conditions=[
                                                ConditionPayloadV2(
                                                    operation="one_of",
                                                    param_bindings=[
                                                        EngineParamBindingPayloadV2(
                                                            array_value=[
                                                                EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                )
                                                            ],
                                                            value=EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            ),
                                                        )
                                                    ],
                                                    subject="incident.severity",
                                                )
                                            ],
                                        )
                                    ],
                                ),
                                navigate=ExpressionNavigateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                operation_type="navigate",
                                parse=ExpressionParseOptsPayloadV2(
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                    source='metadata.annotations["github.com/repo"]',
                                ),
                            )
                        ],
                        reference="abc123",
                        root_reference="incident.status",
                    )
                ],
                incident_config=AlertRouteIncidentConfigPayloadV2(
                    auto_decline_enabled=False,
                    auto_relate_grouped_alerts=False,
                    condition_groups=[
                        ConditionGroupPayloadV2(
                            conditions=[
                                ConditionPayloadV2(
                                    operation="one_of",
                                    param_bindings=[
                                        EngineParamBindingPayloadV2(
                                            array_value=[
                                                EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                )
                                            ],
                                            value=EngineParamBindingValuePayloadV2(
                                                literal="SEV123",
                                                reference="incident.severity",
                                            ),
                                        )
                                    ],
                                    subject="incident.severity",
                                )
                            ],
                        )
                    ],
                    defer_time_seconds=1,
                    enabled=False,
                    grouping_keys=[
                        GroupingKeyV2(
                            reference="alert.title",
                        )
                    ],
                    grouping_window_seconds=1,
                ),
                incident_template=AlertRouteIncidentTemplatePayloadV2(
                    custom_fields=[
                        AlertRouteCustomFieldBindingPayloadV2(
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                            custom_field_id="01FCNDV6P870EA6S7TK1DSYDG0",
                            merge_strategy="first-wins",
                        )
                    ],
                    incident_mode=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    incident_type=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    name=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                        autogenerated=False,
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    severity=AlertRouteSeverityBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                        merge_strategy="first-wins",
                    ),
                    start_in_triage=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    summary=AlertRouteAutoGeneratedTemplateBindingPayloadV2(
                        autogenerated=False,
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                    workspace=AlertRouteTemplateBindingPayloadV2(
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    ),
                ),
                is_private=False,
                name="Production incidents",
                owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
                updated_at=datetime.datetime.fromisoformat(
                    "2021-08-17 13:28:57+00:00",
                ),
                version=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(
            id,
            alert_sources=alert_sources,
            channel_config=channel_config,
            condition_groups=condition_groups,
            enabled=enabled,
            escalation_config=escalation_config,
            expressions=expressions,
            incident_config=incident_config,
            incident_template=incident_template,
            is_private=is_private,
            name=name,
            version=version,
            created_at=created_at,
            owning_team_ids=owning_team_ids,
            updated_at=updated_at,
            request_options=request_options,
        )
        return _response.data

    async def delete(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        Delete an existing alert route in your account.

        Parameters
        ----------
        id : str
            Unique identifier of the alert route

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_routes_v2.delete(
                id="01FCNDV6P870EA6S7TK1DSYDG0",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(id, request_options=request_options)
        return _response.data
