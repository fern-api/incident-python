# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from .actor_v1 import ActorV1
from .custom_field_entry_v1 import CustomFieldEntryV1
from .incident_role_assignment_v1 import IncidentRoleAssignmentV1
from .incident_timestamp_value_v1 import IncidentTimestampValueV1
from .incident_type_v1 import IncidentTypeV1
from .incident_v1mode import IncidentV1Mode
from .incident_v1status import IncidentV1Status
from .incident_v1visibility import IncidentV1Visibility
from .severity_v1 import SeverityV1


class IncidentV1(UniversalBaseModel):
    call_url: typing.Optional[str] = pydantic.Field(default=None)
    """
    The call URL attached to this incident
    """

    created_at: dt.datetime = pydantic.Field()
    """
    When the incident was created
    """

    creator: ActorV1
    custom_field_entries: typing.List[CustomFieldEntryV1] = pydantic.Field()
    """
    Custom field entries for this incident
    """

    id: str = pydantic.Field()
    """
    Unique identifier for the incident
    """

    incident_role_assignments: typing.List[IncidentRoleAssignmentV1] = pydantic.Field()
    """
    A list of who is assigned to each role for this incident
    """

    incident_type: typing.Optional[IncidentTypeV1] = None
    mode: IncidentV1Mode = pydantic.Field()
    """
    Whether the incident is real, a test, a tutorial, or importing as a retrospective incident
    """

    name: str = pydantic.Field()
    """
    Explanation of the incident
    """

    permalink: typing.Optional[str] = pydantic.Field(default=None)
    """
    A permanent link to the homepage for this incident
    """

    postmortem_document_url: typing.Optional[str] = pydantic.Field(default=None)
    """
    The URL of the incident post-mortem document
    """

    reference: str = pydantic.Field()
    """
    Reference to this incident, as displayed across the product
    """

    severity: typing.Optional[SeverityV1] = None
    slack_channel_id: str = pydantic.Field()
    """
    ID of the Slack channel in the organisation Slack workspace. Note that the channel is sometimes created asynchronously, so may not be present when the incident is just created.
    """

    slack_channel_name: typing.Optional[str] = pydantic.Field(default=None)
    """
    Name of the slack channel
    """

    slack_team_id: str = pydantic.Field()
    """
    ID of the Slack team / workspace. This is only required if you are using a Slack Enterprise Grid with multiple teams.
    """

    status: IncidentV1Status = pydantic.Field()
    """
    Current status of the incident
    """

    summary: typing.Optional[str] = pydantic.Field(default=None)
    """
    Detailed description of the incident
    """

    timestamps: typing.Optional[typing.List[IncidentTimestampValueV1]] = pydantic.Field(default=None)
    """
    Incident lifecycle events and when they last occurred
    """

    updated_at: dt.datetime = pydantic.Field()
    """
    When the incident was last updated
    """

    visibility: IncidentV1Visibility = pydantic.Field()
    """
    Whether the incident should be open to anyone in your Slack workspace (public), or invite-only (private). For more information on Private Incidents see our [help centre](https://help.incident.io/articles/5905558102-can-we-mark-incidents-as-sensitive-and-restrict-access).
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
