# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from .actor_v2 import ActorV2
from .custom_field_entry_v2 import CustomFieldEntryV2
from .external_issue_reference_v2 import ExternalIssueReferenceV2
from .incident_duration_metric_with_value_v2 import IncidentDurationMetricWithValueV2
from .incident_role_assignment_v2 import IncidentRoleAssignmentV2
from .incident_status_v2 import IncidentStatusV2
from .incident_timestamp_with_value_v2 import IncidentTimestampWithValueV2
from .incident_type_v2 import IncidentTypeV2
from .severity_v2 import SeverityV2
from .webhook_incident_v2mode import WebhookIncidentV2Mode
from .webhook_incident_v2visibility import WebhookIncidentV2Visibility


class WebhookIncidentV2(UniversalBaseModel):
    call_url: typing.Optional[str] = pydantic.Field(default=None)
    """
    The call URL attached to this incident
    """

    created_at: dt.datetime = pydantic.Field()
    """
    When the incident was created
    """

    creator: ActorV2
    custom_field_entries: typing.List[CustomFieldEntryV2] = pydantic.Field()
    """
    Custom field entries for this incident
    """

    duration_metrics: typing.Optional[typing.List[IncidentDurationMetricWithValueV2]] = pydantic.Field(default=None)
    """
    Incident duration metrics and their measurements for this incident
    """

    external_issue_reference: typing.Optional[ExternalIssueReferenceV2] = None
    has_debrief: typing.Optional[bool] = pydantic.Field(default=None)
    """
    If this incident has a debrief attached
    """

    id: str = pydantic.Field()
    """
    Unique identifier for the incident
    """

    incident_role_assignments: typing.List[IncidentRoleAssignmentV2] = pydantic.Field()
    """
    A list of who is assigned to each role for this incident
    """

    incident_status: IncidentStatusV2
    incident_timestamp_values: typing.Optional[typing.List[IncidentTimestampWithValueV2]] = pydantic.Field(default=None)
    """
    Incident lifecycle events and when they occurred
    """

    incident_type: typing.Optional[IncidentTypeV2] = None
    mode: WebhookIncidentV2Mode = pydantic.Field()
    """
    Whether the incident is real, a test, a tutorial, or importing as a retrospective incident
    """

    most_recent_update_message: typing.Optional[str] = pydantic.Field(default=None)
    """
    Message that explains the context behind the update
    """

    name: str = pydantic.Field()
    """
    Explanation of the incident
    """

    permalink: typing.Optional[str] = pydantic.Field(default=None)
    """
    A permanent link to the homepage for this incident
    """

    postmortem_document_url: typing.Optional[str] = pydantic.Field(default=None)
    """
    The URL of the incident post-mortem document
    """

    reference: str = pydantic.Field()
    """
    Reference to this incident, as displayed across the product
    """

    related_incidents: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    Incident IDs of incidents related to this incident
    """

    severity: typing.Optional[SeverityV2] = None
    slack_channel_id: str = pydantic.Field()
    """
    ID of the Slack channel in the organisation Slack workspace. Note that the channel is sometimes created asynchronously, so may not be present when the incident is just created.
    """

    slack_channel_name: typing.Optional[str] = pydantic.Field(default=None)
    """
    Name of the slack channel
    """

    slack_team_id: str = pydantic.Field()
    """
    ID of the Slack team / workspace. This is only required if you are using a Slack Enterprise Grid with multiple teams.
    """

    summary: typing.Optional[str] = pydantic.Field(default=None)
    """
    Detailed description of the incident
    """

    updated_at: dt.datetime = pydantic.Field()
    """
    When the incident was last updated
    """

    visibility: WebhookIncidentV2Visibility = pydantic.Field()
    """
    Whether the incident should be open to anyone in your Slack workspace (public), or invite-only (private). For more information on Private Incidents see our [help centre](https://help.incident.io/articles/5905558102-can-we-mark-incidents-as-sensitive-and-restrict-access).
    """

    workload_minutes_late: typing.Optional[float] = pydantic.Field(default=None)
    """
    Amount of time spent on the incident in late hours
    """

    workload_minutes_sleeping: typing.Optional[float] = pydantic.Field(default=None)
    """
    Amount of time spent on the incident in sleeping hours
    """

    workload_minutes_total: typing.Optional[float] = pydantic.Field(default=None)
    """
    Amount of time spent on the incident in total
    """

    workload_minutes_working: typing.Optional[float] = pydantic.Field(default=None)
    """
    Amount of time spent on the incident in working hours
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
