# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.alerts_list_incident_alerts_result_v2 import AlertsListIncidentAlertsResultV2
from ..types.alerts_list_result_v2 import AlertsListResultV2
from ..types.alerts_show_result_v2 import AlertsShowResultV2
from .raw_client import AsyncRawAlertsV2Client, RawAlertsV2Client


class AlertsV2Client:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawAlertsV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawAlertsV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawAlertsV2Client
        """
        return self._raw_client

    def list(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        deduplication_key: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        status: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        created_at: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertsListResultV2:
        """
        List all alerts for your account.
                
        This endpoint supports a number of filters, which can help find alerts matching certain
        criteria. These filters work similarly to the filters on the incidents endpoint, where 
        a field is specified alongside a comparison operator in the query string.
        
        Note that:
        - Filters may be used together, and the result will be alerts that match all filters.
        - All query parameters must be URI encoded.
        
        ### By deduplication_key
        
        Find all alerts with deduplication_key ABC:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'deduplication_key[is]=ABC'
        
        ### By status
        
        Find all alerts in a firing state:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'status[one_of]=firing'
        
        ### By created_at
        Find all alerts that follow specified date parameters for created_at field.
        Possible values are "gte" (greater than or equal to), "lte" (less than or equal to), and 
        "date_range" (between two dates). The following example finds all alerts created after 
        2025-01-01:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'created_at[gte]=2025-01-01'
        
        To find alerts created within a specific date range, use the date_range option with 
        tilde-separated dates:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'created_at[date_range]=2024-12-02~2024-12-08'
                
        
        Parameters
        ----------
        page_size : int
            Number of alerts to return per page
        
        after : typing.Optional[str]
            If provided, pass this as the 'after' param to load the next page
        
        deduplication_key : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert deduplication key. The accepted operator is 'is'.
        
        status : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert status. The accepted operators are 'one_of', or 'not_in'.
        
        created_at : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert created at timestamp. Accepted operators are 'gte', 'lte' and 'date_range'.
        
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.
        
        Returns
        -------
        AlertsListResultV2
            OK response.
        
        Examples
        --------
        from fern import IncidentIO
        
        client = IncidentIO()
        client.alerts_v2.list(
            page_size=25,
            after="01FCNDV6P870EA6S7TK1DSYDG0",
        )
        """
        _response = self._raw_client.list(
            page_size=page_size,
            after=after,
            deduplication_key=deduplication_key,
            status=status,
            created_at=created_at,
            request_options=request_options,
        )
        return _response.data

    def show(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> AlertsShowResultV2:
        """
        Show a single alert for your account

        Parameters
        ----------
        id : str
            Unique identifier for the alert

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertsShowResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alerts_v2.show(
            id="01FDAG4SAP5TYPT98WGR2N7W91",
        )
        """
        _response = self._raw_client.show(id, request_options=request_options)
        return _response.data

    def listincidentalerts(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        alert_id: typing.Optional[str] = None,
        incident_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertsListIncidentAlertsResultV2:
        """
        List the connections between incidents and alerts

        Parameters
        ----------
        page_size : int
            Number of incident alerts to return per page

        after : typing.Optional[str]
            If provided, pass this as the 'after' param to load the next page

        alert_id : typing.Optional[str]
            Alert that this incident alert refers to

        incident_id : typing.Optional[str]
            Incident that this incident alert is attached to

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertsListIncidentAlertsResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alerts_v2.listincidentalerts(
            page_size=25,
            after="01FCNDV6P870EA6S7TK1DSYDG0",
            alert_id="01FCNDV6P870EA6S7TK1DSYDG1",
            incident_id="01FCNDV6P870EA6S7TK1DSYDG0",
        )
        """
        _response = self._raw_client.listincidentalerts(
            page_size=page_size,
            after=after,
            alert_id=alert_id,
            incident_id=incident_id,
            request_options=request_options,
        )
        return _response.data


class AsyncAlertsV2Client:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawAlertsV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawAlertsV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawAlertsV2Client
        """
        return self._raw_client

    async def list(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        deduplication_key: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        status: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        created_at: typing.Optional[typing.Dict[str, typing.Sequence[str]]] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertsListResultV2:
        """
        List all alerts for your account.
                
        This endpoint supports a number of filters, which can help find alerts matching certain
        criteria. These filters work similarly to the filters on the incidents endpoint, where 
        a field is specified alongside a comparison operator in the query string.
        
        Note that:
        - Filters may be used together, and the result will be alerts that match all filters.
        - All query parameters must be URI encoded.
        
        ### By deduplication_key
        
        Find all alerts with deduplication_key ABC:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'deduplication_key[is]=ABC'
        
        ### By status
        
        Find all alerts in a firing state:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'status[one_of]=firing'
        
        ### By created_at
        Find all alerts that follow specified date parameters for created_at field.
        Possible values are "gte" (greater than or equal to), "lte" (less than or equal to), and 
        "date_range" (between two dates). The following example finds all alerts created after 
        2025-01-01:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'created_at[gte]=2025-01-01'
        
        To find alerts created within a specific date range, use the date_range option with 
        tilde-separated dates:
        
                curl --get 'https://api.incident.io/v2/alerts' \\
                    --data 'created_at[date_range]=2024-12-02~2024-12-08'
                
        
        Parameters
        ----------
        page_size : int
            Number of alerts to return per page
        
        after : typing.Optional[str]
            If provided, pass this as the 'after' param to load the next page
        
        deduplication_key : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert deduplication key. The accepted operator is 'is'.
        
        status : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert status. The accepted operators are 'one_of', or 'not_in'.
        
        created_at : typing.Optional[typing.Dict[str, typing.Sequence[str]]]
            Filter on alert created at timestamp. Accepted operators are 'gte', 'lte' and 'date_range'.
        
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.
        
        Returns
        -------
        AlertsListResultV2
            OK response.
        
        Examples
        --------
        import asyncio
        
        from fern import AsyncIncidentIO
        
        client = AsyncIncidentIO()
        
        
        async def main() -> None:
            await client.alerts_v2.list(
                page_size=25,
                after="01FCNDV6P870EA6S7TK1DSYDG0",
            )
        
        
        asyncio.run(main())
        """
        _response = await self._raw_client.list(
            page_size=page_size,
            after=after,
            deduplication_key=deduplication_key,
            status=status,
            created_at=created_at,
            request_options=request_options,
        )
        return _response.data

    async def show(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> AlertsShowResultV2:
        """
        Show a single alert for your account

        Parameters
        ----------
        id : str
            Unique identifier for the alert

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertsShowResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alerts_v2.show(
                id="01FDAG4SAP5TYPT98WGR2N7W91",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.show(id, request_options=request_options)
        return _response.data

    async def listincidentalerts(
        self,
        *,
        page_size: int,
        after: typing.Optional[str] = None,
        alert_id: typing.Optional[str] = None,
        incident_id: typing.Optional[str] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertsListIncidentAlertsResultV2:
        """
        List the connections between incidents and alerts

        Parameters
        ----------
        page_size : int
            Number of incident alerts to return per page

        after : typing.Optional[str]
            If provided, pass this as the 'after' param to load the next page

        alert_id : typing.Optional[str]
            Alert that this incident alert refers to

        incident_id : typing.Optional[str]
            Incident that this incident alert is attached to

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertsListIncidentAlertsResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alerts_v2.listincidentalerts(
                page_size=25,
                after="01FCNDV6P870EA6S7TK1DSYDG0",
                alert_id="01FCNDV6P870EA6S7TK1DSYDG1",
                incident_id="01FCNDV6P870EA6S7TK1DSYDG0",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.listincidentalerts(
            page_size=page_size,
            after=after,
            alert_id=alert_id,
            incident_id=incident_id,
            request_options=request_options,
        )
        return _response.data
