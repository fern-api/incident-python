# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.alert_source_http_custom_options_v2 import AlertSourceHttpCustomOptionsV2
from ..types.alert_source_jira_options_v2 import AlertSourceJiraOptionsV2
from ..types.alert_sources_create_result_v2 import AlertSourcesCreateResultV2
from ..types.alert_sources_list_result_v2 import AlertSourcesListResultV2
from ..types.alert_sources_show_result_v2 import AlertSourcesShowResultV2
from ..types.alert_sources_update_result_v2 import AlertSourcesUpdateResultV2
from ..types.alert_template_payload_v2 import AlertTemplatePayloadV2
from .raw_client import AsyncRawAlertSourcesV2Client, RawAlertSourcesV2Client
from .types.alert_sources_create_payload_v2source_type import AlertSourcesCreatePayloadV2SourceType

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class AlertSourcesV2Client:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawAlertSourcesV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawAlertSourcesV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawAlertSourcesV2Client
        """
        return self._raw_client

    def list(self, *, request_options: typing.Optional[RequestOptions] = None) -> AlertSourcesListResultV2:
        """
        List all alert sources in your account.

        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesListResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_sources_v2.list()
        """
        _response = self._raw_client.list(request_options=request_options)
        return _response.data

    def create(
        self,
        *,
        name: str,
        source_type: AlertSourcesCreatePayloadV2SourceType,
        template: AlertTemplatePayloadV2,
        http_custom_options: typing.Optional[AlertSourceHttpCustomOptionsV2] = OMIT,
        jira_options: typing.Optional[AlertSourceJiraOptionsV2] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertSourcesCreateResultV2:
        """
        Create a new alert source in your account.

        Parameters
        ----------
        name : str
            Unique name of the alert source

        source_type : AlertSourcesCreatePayloadV2SourceType
            Type of alert source

        template : AlertTemplatePayloadV2

        http_custom_options : typing.Optional[AlertSourceHttpCustomOptionsV2]

        jira_options : typing.Optional[AlertSourceJiraOptionsV2]

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesCreateResultV2
            OK response.

        Examples
        --------
        from fern import (
            AlertSourceHttpCustomOptionsV2,
            AlertSourceJiraOptionsV2,
            AlertTemplateAttributePayloadV2,
            AlertTemplatePayloadV2,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            IncidentIO,
            ReturnsMetaV2,
        )

        client = IncidentIO()
        client.alert_sources_v2.create(
            http_custom_options=AlertSourceHttpCustomOptionsV2(
                deduplication_key_path="$.alert_id",
                transform_expression="return {\n  title: $.title || $.name || 'Unknown Alert',\n  status: $.status === 'resolved' ? 'resolved' : 'firing',\n  description: $.description || $.message || '',\n  sourceURL: $.url || $.link || '',\n  metadata: { team: $.team, severity: $.severity }\n}",
            ),
            jira_options=AlertSourceJiraOptionsV2(
                project_ids=["01GBSQF3FHF7FWZQNWGHAVQ804", "10043"],
            ),
            name="Production Web Dashboard Alerts",
            owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
            source_type="alertmanager",
            template=AlertTemplatePayloadV2(
                attributes=[
                    AlertTemplateAttributePayloadV2(
                        alert_attribute_id="abc123",
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    )
                ],
                description=EngineParamBindingValuePayloadV2(
                    literal="SEV123",
                    reference="incident.severity",
                ),
                expressions=[
                    ExpressionPayloadV2(
                        else_branch=ExpressionElseBranchPayloadV2(
                            result=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        ),
                        label="Team Slack channel",
                        operations=[
                            ExpressionOperationPayloadV2(
                                branches=ExpressionBranchesOptsPayloadV2(
                                    branches=[
                                        ExpressionBranchPayloadV2(
                                            condition_groups=[
                                                ConditionGroupPayloadV2(
                                                    conditions=[
                                                        ConditionPayloadV2(
                                                            operation="one_of",
                                                            param_bindings=[
                                                                EngineParamBindingPayloadV2(
                                                                    array_value=[
                                                                        EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        )
                                                                    ],
                                                                    value=EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    ),
                                                                )
                                                            ],
                                                            subject="incident.severity",
                                                        )
                                                    ],
                                                )
                                            ],
                                            result=EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            ),
                                        )
                                    ],
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                ),
                                concatenate=ExpressionConcatenateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                filter=ExpressionFilterOptsPayloadV2(
                                    condition_groups=[
                                        ConditionGroupPayloadV2(
                                            conditions=[
                                                ConditionPayloadV2(
                                                    operation="one_of",
                                                    param_bindings=[
                                                        EngineParamBindingPayloadV2(
                                                            array_value=[
                                                                EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                )
                                                            ],
                                                            value=EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            ),
                                                        )
                                                    ],
                                                    subject="incident.severity",
                                                )
                                            ],
                                        )
                                    ],
                                ),
                                navigate=ExpressionNavigateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                operation_type="navigate",
                                parse=ExpressionParseOptsPayloadV2(
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                    source='metadata.annotations["github.com/repo"]',
                                ),
                            )
                        ],
                        reference="abc123",
                        root_reference="incident.status",
                    )
                ],
                is_private=False,
                title=EngineParamBindingValuePayloadV2(
                    literal="SEV123",
                    reference="incident.severity",
                ),
                visible_to_teams=EngineParamBindingPayloadV2(
                    array_value=[
                        EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        )
                    ],
                    value=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                ),
            ),
        )
        """
        _response = self._raw_client.create(
            name=name,
            source_type=source_type,
            template=template,
            http_custom_options=http_custom_options,
            jira_options=jira_options,
            owning_team_ids=owning_team_ids,
            request_options=request_options,
        )
        return _response.data

    def show(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> AlertSourcesShowResultV2:
        """
        Load details about a specific alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesShowResultV2
            OK response.

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_sources_v2.show(
            id="01GW2G3V0S59R238FAHPDS1R66",
        )
        """
        _response = self._raw_client.show(id, request_options=request_options)
        return _response.data

    def update(
        self,
        id: str,
        *,
        name: str,
        template: AlertTemplatePayloadV2,
        http_custom_options: typing.Optional[AlertSourceHttpCustomOptionsV2] = OMIT,
        jira_options: typing.Optional[AlertSourceJiraOptionsV2] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertSourcesUpdateResultV2:
        """
        Update an existing alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        name : str
            Unique name of the alert source

        template : AlertTemplatePayloadV2

        http_custom_options : typing.Optional[AlertSourceHttpCustomOptionsV2]

        jira_options : typing.Optional[AlertSourceJiraOptionsV2]

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesUpdateResultV2
            OK response.

        Examples
        --------
        from fern import (
            AlertSourceHttpCustomOptionsV2,
            AlertSourceJiraOptionsV2,
            AlertTemplateAttributePayloadV2,
            AlertTemplatePayloadV2,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            IncidentIO,
            ReturnsMetaV2,
        )

        client = IncidentIO()
        client.alert_sources_v2.update(
            id="01GW2G3V0S59R238FAHPDS1R66",
            http_custom_options=AlertSourceHttpCustomOptionsV2(
                deduplication_key_path="$.alert_id",
                transform_expression="return {\n  title: $.title || $.name || 'Unknown Alert',\n  status: $.status === 'resolved' ? 'resolved' : 'firing',\n  description: $.description || $.message || '',\n  sourceURL: $.url || $.link || '',\n  metadata: { team: $.team, severity: $.severity }\n}",
            ),
            jira_options=AlertSourceJiraOptionsV2(
                project_ids=["01GBSQF3FHF7FWZQNWGHAVQ804", "10043"],
            ),
            name="Production Web Dashboard Alerts",
            owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
            template=AlertTemplatePayloadV2(
                attributes=[
                    AlertTemplateAttributePayloadV2(
                        alert_attribute_id="abc123",
                        binding=EngineParamBindingPayloadV2(
                            array_value=[
                                EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                )
                            ],
                            value=EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            ),
                        ),
                    )
                ],
                description=EngineParamBindingValuePayloadV2(
                    literal="SEV123",
                    reference="incident.severity",
                ),
                expressions=[
                    ExpressionPayloadV2(
                        else_branch=ExpressionElseBranchPayloadV2(
                            result=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        ),
                        label="Team Slack channel",
                        operations=[
                            ExpressionOperationPayloadV2(
                                branches=ExpressionBranchesOptsPayloadV2(
                                    branches=[
                                        ExpressionBranchPayloadV2(
                                            condition_groups=[
                                                ConditionGroupPayloadV2(
                                                    conditions=[
                                                        ConditionPayloadV2(
                                                            operation="one_of",
                                                            param_bindings=[
                                                                EngineParamBindingPayloadV2(
                                                                    array_value=[
                                                                        EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        )
                                                                    ],
                                                                    value=EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    ),
                                                                )
                                                            ],
                                                            subject="incident.severity",
                                                        )
                                                    ],
                                                )
                                            ],
                                            result=EngineParamBindingPayloadV2(
                                                array_value=[
                                                    EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    )
                                                ],
                                                value=EngineParamBindingValuePayloadV2(
                                                    literal="SEV123",
                                                    reference="incident.severity",
                                                ),
                                            ),
                                        )
                                    ],
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                ),
                                concatenate=ExpressionConcatenateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                filter=ExpressionFilterOptsPayloadV2(
                                    condition_groups=[
                                        ConditionGroupPayloadV2(
                                            conditions=[
                                                ConditionPayloadV2(
                                                    operation="one_of",
                                                    param_bindings=[
                                                        EngineParamBindingPayloadV2(
                                                            array_value=[
                                                                EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                )
                                                            ],
                                                            value=EngineParamBindingValuePayloadV2(
                                                                literal="SEV123",
                                                                reference="incident.severity",
                                                            ),
                                                        )
                                                    ],
                                                    subject="incident.severity",
                                                )
                                            ],
                                        )
                                    ],
                                ),
                                navigate=ExpressionNavigateOptsPayloadV2(
                                    reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                ),
                                operation_type="navigate",
                                parse=ExpressionParseOptsPayloadV2(
                                    returns=ReturnsMetaV2(
                                        array=True,
                                        type="IncidentStatus",
                                    ),
                                    source='metadata.annotations["github.com/repo"]',
                                ),
                            )
                        ],
                        reference="abc123",
                        root_reference="incident.status",
                    )
                ],
                is_private=False,
                title=EngineParamBindingValuePayloadV2(
                    literal="SEV123",
                    reference="incident.severity",
                ),
                visible_to_teams=EngineParamBindingPayloadV2(
                    array_value=[
                        EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        )
                    ],
                    value=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                ),
            ),
        )
        """
        _response = self._raw_client.update(
            id,
            name=name,
            template=template,
            http_custom_options=http_custom_options,
            jira_options=jira_options,
            owning_team_ids=owning_team_ids,
            request_options=request_options,
        )
        return _response.data

    def delete(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        Delete an existing alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from fern import IncidentIO

        client = IncidentIO()
        client.alert_sources_v2.delete(
            id="01GW2G3V0S59R238FAHPDS1R66",
        )
        """
        _response = self._raw_client.delete(id, request_options=request_options)
        return _response.data


class AsyncAlertSourcesV2Client:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawAlertSourcesV2Client(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawAlertSourcesV2Client:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawAlertSourcesV2Client
        """
        return self._raw_client

    async def list(self, *, request_options: typing.Optional[RequestOptions] = None) -> AlertSourcesListResultV2:
        """
        List all alert sources in your account.

        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesListResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_sources_v2.list()


        asyncio.run(main())
        """
        _response = await self._raw_client.list(request_options=request_options)
        return _response.data

    async def create(
        self,
        *,
        name: str,
        source_type: AlertSourcesCreatePayloadV2SourceType,
        template: AlertTemplatePayloadV2,
        http_custom_options: typing.Optional[AlertSourceHttpCustomOptionsV2] = OMIT,
        jira_options: typing.Optional[AlertSourceJiraOptionsV2] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertSourcesCreateResultV2:
        """
        Create a new alert source in your account.

        Parameters
        ----------
        name : str
            Unique name of the alert source

        source_type : AlertSourcesCreatePayloadV2SourceType
            Type of alert source

        template : AlertTemplatePayloadV2

        http_custom_options : typing.Optional[AlertSourceHttpCustomOptionsV2]

        jira_options : typing.Optional[AlertSourceJiraOptionsV2]

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesCreateResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import (
            AlertSourceHttpCustomOptionsV2,
            AlertSourceJiraOptionsV2,
            AlertTemplateAttributePayloadV2,
            AlertTemplatePayloadV2,
            AsyncIncidentIO,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            ReturnsMetaV2,
        )

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_sources_v2.create(
                http_custom_options=AlertSourceHttpCustomOptionsV2(
                    deduplication_key_path="$.alert_id",
                    transform_expression="return {\n  title: $.title || $.name || 'Unknown Alert',\n  status: $.status === 'resolved' ? 'resolved' : 'firing',\n  description: $.description || $.message || '',\n  sourceURL: $.url || $.link || '',\n  metadata: { team: $.team, severity: $.severity }\n}",
                ),
                jira_options=AlertSourceJiraOptionsV2(
                    project_ids=["01GBSQF3FHF7FWZQNWGHAVQ804", "10043"],
                ),
                name="Production Web Dashboard Alerts",
                owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
                source_type="alertmanager",
                template=AlertTemplatePayloadV2(
                    attributes=[
                        AlertTemplateAttributePayloadV2(
                            alert_attribute_id="abc123",
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        )
                    ],
                    description=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                    expressions=[
                        ExpressionPayloadV2(
                            else_branch=ExpressionElseBranchPayloadV2(
                                result=EngineParamBindingPayloadV2(
                                    array_value=[
                                        EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        )
                                    ],
                                    value=EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    ),
                                ),
                            ),
                            label="Team Slack channel",
                            operations=[
                                ExpressionOperationPayloadV2(
                                    branches=ExpressionBranchesOptsPayloadV2(
                                        branches=[
                                            ExpressionBranchPayloadV2(
                                                condition_groups=[
                                                    ConditionGroupPayloadV2(
                                                        conditions=[
                                                            ConditionPayloadV2(
                                                                operation="one_of",
                                                                param_bindings=[
                                                                    EngineParamBindingPayloadV2(
                                                                        array_value=[
                                                                            EngineParamBindingValuePayloadV2(
                                                                                literal="SEV123",
                                                                                reference="incident.severity",
                                                                            )
                                                                        ],
                                                                        value=EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        ),
                                                                    )
                                                                ],
                                                                subject="incident.severity",
                                                            )
                                                        ],
                                                    )
                                                ],
                                                result=EngineParamBindingPayloadV2(
                                                    array_value=[
                                                        EngineParamBindingValuePayloadV2(
                                                            literal="SEV123",
                                                            reference="incident.severity",
                                                        )
                                                    ],
                                                    value=EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    ),
                                                ),
                                            )
                                        ],
                                        returns=ReturnsMetaV2(
                                            array=True,
                                            type="IncidentStatus",
                                        ),
                                    ),
                                    concatenate=ExpressionConcatenateOptsPayloadV2(
                                        reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                    ),
                                    filter=ExpressionFilterOptsPayloadV2(
                                        condition_groups=[
                                            ConditionGroupPayloadV2(
                                                conditions=[
                                                    ConditionPayloadV2(
                                                        operation="one_of",
                                                        param_bindings=[
                                                            EngineParamBindingPayloadV2(
                                                                array_value=[
                                                                    EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    )
                                                                ],
                                                                value=EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                ),
                                                            )
                                                        ],
                                                        subject="incident.severity",
                                                    )
                                                ],
                                            )
                                        ],
                                    ),
                                    navigate=ExpressionNavigateOptsPayloadV2(
                                        reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                    ),
                                    operation_type="navigate",
                                    parse=ExpressionParseOptsPayloadV2(
                                        returns=ReturnsMetaV2(
                                            array=True,
                                            type="IncidentStatus",
                                        ),
                                        source='metadata.annotations["github.com/repo"]',
                                    ),
                                )
                            ],
                            reference="abc123",
                            root_reference="incident.status",
                        )
                    ],
                    is_private=False,
                    title=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                    visible_to_teams=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            name=name,
            source_type=source_type,
            template=template,
            http_custom_options=http_custom_options,
            jira_options=jira_options,
            owning_team_ids=owning_team_ids,
            request_options=request_options,
        )
        return _response.data

    async def show(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AlertSourcesShowResultV2:
        """
        Load details about a specific alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesShowResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_sources_v2.show(
                id="01GW2G3V0S59R238FAHPDS1R66",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.show(id, request_options=request_options)
        return _response.data

    async def update(
        self,
        id: str,
        *,
        name: str,
        template: AlertTemplatePayloadV2,
        http_custom_options: typing.Optional[AlertSourceHttpCustomOptionsV2] = OMIT,
        jira_options: typing.Optional[AlertSourceJiraOptionsV2] = OMIT,
        owning_team_ids: typing.Optional[typing.Sequence[str]] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AlertSourcesUpdateResultV2:
        """
        Update an existing alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        name : str
            Unique name of the alert source

        template : AlertTemplatePayloadV2

        http_custom_options : typing.Optional[AlertSourceHttpCustomOptionsV2]

        jira_options : typing.Optional[AlertSourceJiraOptionsV2]

        owning_team_ids : typing.Optional[typing.Sequence[str]]
            IDs of teams that own this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AlertSourcesUpdateResultV2
            OK response.

        Examples
        --------
        import asyncio

        from fern import (
            AlertSourceHttpCustomOptionsV2,
            AlertSourceJiraOptionsV2,
            AlertTemplateAttributePayloadV2,
            AlertTemplatePayloadV2,
            AsyncIncidentIO,
            ConditionGroupPayloadV2,
            ConditionPayloadV2,
            EngineParamBindingPayloadV2,
            EngineParamBindingValuePayloadV2,
            ExpressionBranchesOptsPayloadV2,
            ExpressionBranchPayloadV2,
            ExpressionConcatenateOptsPayloadV2,
            ExpressionElseBranchPayloadV2,
            ExpressionFilterOptsPayloadV2,
            ExpressionNavigateOptsPayloadV2,
            ExpressionOperationPayloadV2,
            ExpressionParseOptsPayloadV2,
            ExpressionPayloadV2,
            ReturnsMetaV2,
        )

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_sources_v2.update(
                id="01GW2G3V0S59R238FAHPDS1R66",
                http_custom_options=AlertSourceHttpCustomOptionsV2(
                    deduplication_key_path="$.alert_id",
                    transform_expression="return {\n  title: $.title || $.name || 'Unknown Alert',\n  status: $.status === 'resolved' ? 'resolved' : 'firing',\n  description: $.description || $.message || '',\n  sourceURL: $.url || $.link || '',\n  metadata: { team: $.team, severity: $.severity }\n}",
                ),
                jira_options=AlertSourceJiraOptionsV2(
                    project_ids=["01GBSQF3FHF7FWZQNWGHAVQ804", "10043"],
                ),
                name="Production Web Dashboard Alerts",
                owning_team_ids=["01G0J1EXE7AXZ2C93K61WBPYEH"],
                template=AlertTemplatePayloadV2(
                    attributes=[
                        AlertTemplateAttributePayloadV2(
                            alert_attribute_id="abc123",
                            binding=EngineParamBindingPayloadV2(
                                array_value=[
                                    EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    )
                                ],
                                value=EngineParamBindingValuePayloadV2(
                                    literal="SEV123",
                                    reference="incident.severity",
                                ),
                            ),
                        )
                    ],
                    description=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                    expressions=[
                        ExpressionPayloadV2(
                            else_branch=ExpressionElseBranchPayloadV2(
                                result=EngineParamBindingPayloadV2(
                                    array_value=[
                                        EngineParamBindingValuePayloadV2(
                                            literal="SEV123",
                                            reference="incident.severity",
                                        )
                                    ],
                                    value=EngineParamBindingValuePayloadV2(
                                        literal="SEV123",
                                        reference="incident.severity",
                                    ),
                                ),
                            ),
                            label="Team Slack channel",
                            operations=[
                                ExpressionOperationPayloadV2(
                                    branches=ExpressionBranchesOptsPayloadV2(
                                        branches=[
                                            ExpressionBranchPayloadV2(
                                                condition_groups=[
                                                    ConditionGroupPayloadV2(
                                                        conditions=[
                                                            ConditionPayloadV2(
                                                                operation="one_of",
                                                                param_bindings=[
                                                                    EngineParamBindingPayloadV2(
                                                                        array_value=[
                                                                            EngineParamBindingValuePayloadV2(
                                                                                literal="SEV123",
                                                                                reference="incident.severity",
                                                                            )
                                                                        ],
                                                                        value=EngineParamBindingValuePayloadV2(
                                                                            literal="SEV123",
                                                                            reference="incident.severity",
                                                                        ),
                                                                    )
                                                                ],
                                                                subject="incident.severity",
                                                            )
                                                        ],
                                                    )
                                                ],
                                                result=EngineParamBindingPayloadV2(
                                                    array_value=[
                                                        EngineParamBindingValuePayloadV2(
                                                            literal="SEV123",
                                                            reference="incident.severity",
                                                        )
                                                    ],
                                                    value=EngineParamBindingValuePayloadV2(
                                                        literal="SEV123",
                                                        reference="incident.severity",
                                                    ),
                                                ),
                                            )
                                        ],
                                        returns=ReturnsMetaV2(
                                            array=True,
                                            type="IncidentStatus",
                                        ),
                                    ),
                                    concatenate=ExpressionConcatenateOptsPayloadV2(
                                        reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                    ),
                                    filter=ExpressionFilterOptsPayloadV2(
                                        condition_groups=[
                                            ConditionGroupPayloadV2(
                                                conditions=[
                                                    ConditionPayloadV2(
                                                        operation="one_of",
                                                        param_bindings=[
                                                            EngineParamBindingPayloadV2(
                                                                array_value=[
                                                                    EngineParamBindingValuePayloadV2(
                                                                        literal="SEV123",
                                                                        reference="incident.severity",
                                                                    )
                                                                ],
                                                                value=EngineParamBindingValuePayloadV2(
                                                                    literal="SEV123",
                                                                    reference="incident.severity",
                                                                ),
                                                            )
                                                        ],
                                                        subject="incident.severity",
                                                    )
                                                ],
                                            )
                                        ],
                                    ),
                                    navigate=ExpressionNavigateOptsPayloadV2(
                                        reference='catalog_attribute["01FCNDV6P870EA6S7TK1DSYD5H"]',
                                    ),
                                    operation_type="navigate",
                                    parse=ExpressionParseOptsPayloadV2(
                                        returns=ReturnsMetaV2(
                                            array=True,
                                            type="IncidentStatus",
                                        ),
                                        source='metadata.annotations["github.com/repo"]',
                                    ),
                                )
                            ],
                            reference="abc123",
                            root_reference="incident.status",
                        )
                    ],
                    is_private=False,
                    title=EngineParamBindingValuePayloadV2(
                        literal="SEV123",
                        reference="incident.severity",
                    ),
                    visible_to_teams=EngineParamBindingPayloadV2(
                        array_value=[
                            EngineParamBindingValuePayloadV2(
                                literal="SEV123",
                                reference="incident.severity",
                            )
                        ],
                        value=EngineParamBindingValuePayloadV2(
                            literal="SEV123",
                            reference="incident.severity",
                        ),
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(
            id,
            name=name,
            template=template,
            http_custom_options=http_custom_options,
            jira_options=jira_options,
            owning_team_ids=owning_team_ids,
            request_options=request_options,
        )
        return _response.data

    async def delete(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        Delete an existing alert source in your account.

        Parameters
        ----------
        id : str
            The ID of this alert source

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from fern import AsyncIncidentIO

        client = AsyncIncidentIO()


        async def main() -> None:
            await client.alert_sources_v2.delete(
                id="01GW2G3V0S59R238FAHPDS1R66",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(id, request_options=request_options)
        return _response.data
