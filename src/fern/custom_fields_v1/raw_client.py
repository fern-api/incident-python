# This file was auto-generated by Fern from our API Definition.

import typing
from json.decoder import JSONDecodeError

from ..core.api_error import ApiError
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.http_response import AsyncHttpResponse, HttpResponse
from ..core.jsonable_encoder import jsonable_encoder
from ..core.pydantic_utilities import parse_obj_as
from ..core.request_options import RequestOptions
from ..types.custom_fields_create_result_v1 import CustomFieldsCreateResultV1
from ..types.custom_fields_list_result_v1 import CustomFieldsListResultV1
from ..types.custom_fields_show_result_v1 import CustomFieldsShowResultV1
from ..types.custom_fields_update_result_v1 import CustomFieldsUpdateResultV1
from .types.custom_fields_create_payload_v1field_type import CustomFieldsCreatePayloadV1FieldType
from .types.custom_fields_create_payload_v1required import CustomFieldsCreatePayloadV1Required
from .types.custom_fields_create_payload_v1required_v2 import CustomFieldsCreatePayloadV1RequiredV2
from .types.custom_fields_update_payload_v1required import CustomFieldsUpdatePayloadV1Required
from .types.custom_fields_update_payload_v1required_v2 import CustomFieldsUpdatePayloadV1RequiredV2

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class RawCustomFieldsV1Client:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._client_wrapper = client_wrapper

    def list(
        self, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[CustomFieldsListResultV1]:
        """
        List all custom fields for an organisation.

        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[CustomFieldsListResultV1]
            OK response.
        """
        _response = self._client_wrapper.httpx_client.request(
            "v1/custom_fields",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsListResultV1,
                    parse_obj_as(
                        type_=CustomFieldsListResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def create(
        self,
        *,
        description: str,
        field_type: CustomFieldsCreatePayloadV1FieldType,
        name: str,
        show_before_closure: bool,
        show_before_creation: bool,
        show_before_update: bool,
        required: typing.Optional[CustomFieldsCreatePayloadV1Required] = OMIT,
        required_v2: typing.Optional[CustomFieldsCreatePayloadV1RequiredV2] = OMIT,
        show_in_announcement_post: typing.Optional[bool] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[CustomFieldsCreateResultV1]:
        """
        Create a new custom field

        Parameters
        ----------
        description : str
            Description of the custom field

        field_type : CustomFieldsCreatePayloadV1FieldType
            Type of custom field

        name : str
            Human readable name for the custom field

        show_before_closure : bool
            Whether a custom field should be shown in the incident resolve modal. If this custom field is required before resolution, but no value has been set for it, the field will be shown in the resolve modal whatever the value of this setting.

        show_before_creation : bool
            Whether a custom field should be shown in the incident creation modal. This must be true if the field is always required.

        show_before_update : bool
            Whether a custom field should be shown in the incident update modal.

        required : typing.Optional[CustomFieldsCreatePayloadV1Required]
            When this custom field must be set during the incident lifecycle. [DEPRECATED: please use required_v2 instead].

        required_v2 : typing.Optional[CustomFieldsCreatePayloadV1RequiredV2]
            When this custom field must be set during the incident lifecycle.

        show_in_announcement_post : typing.Optional[bool]
            Whether a custom field should be shown in the list of fields as part of the announcement post when set.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[CustomFieldsCreateResultV1]
            Created response.
        """
        _response = self._client_wrapper.httpx_client.request(
            "v1/custom_fields",
            method="POST",
            json={
                "description": description,
                "field_type": field_type,
                "name": name,
                "required": required,
                "required_v2": required_v2,
                "show_before_closure": show_before_closure,
                "show_before_creation": show_before_creation,
                "show_before_update": show_before_update,
                "show_in_announcement_post": show_in_announcement_post,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsCreateResultV1,
                    parse_obj_as(
                        type_=CustomFieldsCreateResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def show(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[CustomFieldsShowResultV1]:
        """
        Get a single custom field.

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[CustomFieldsShowResultV1]
            OK response.
        """
        _response = self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsShowResultV1,
                    parse_obj_as(
                        type_=CustomFieldsShowResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def update(
        self,
        id: str,
        *,
        description: str,
        name: str,
        show_before_closure: bool,
        show_before_creation: bool,
        show_before_update: bool,
        required: typing.Optional[CustomFieldsUpdatePayloadV1Required] = OMIT,
        required_v2: typing.Optional[CustomFieldsUpdatePayloadV1RequiredV2] = OMIT,
        show_in_announcement_post: typing.Optional[bool] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[CustomFieldsUpdateResultV1]:
        """
        Update the details of a custom field

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        description : str
            Description of the custom field

        name : str
            Human readable name for the custom field

        show_before_closure : bool
            Whether a custom field should be shown in the incident resolve modal. If this custom field is required before resolution, but no value has been set for it, the field will be shown in the resolve modal whatever the value of this setting.

        show_before_creation : bool
            Whether a custom field should be shown in the incident creation modal. This must be true if the field is always required.

        show_before_update : bool
            Whether a custom field should be shown in the incident update modal.

        required : typing.Optional[CustomFieldsUpdatePayloadV1Required]
            When this custom field must be set during the incident lifecycle. [DEPRECATED: please use required_v2 instead].

        required_v2 : typing.Optional[CustomFieldsUpdatePayloadV1RequiredV2]
            When this custom field must be set during the incident lifecycle.

        show_in_announcement_post : typing.Optional[bool]
            Whether a custom field should be shown in the list of fields as part of the announcement post when set.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[CustomFieldsUpdateResultV1]
            OK response.
        """
        _response = self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="PUT",
            json={
                "description": description,
                "name": name,
                "required": required,
                "required_v2": required_v2,
                "show_before_closure": show_before_closure,
                "show_before_creation": show_before_creation,
                "show_before_update": show_before_update,
                "show_in_announcement_post": show_in_announcement_post,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsUpdateResultV1,
                    parse_obj_as(
                        type_=CustomFieldsUpdateResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def delete(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> HttpResponse[None]:
        """
        Delete a custom field

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[None]
        """
        _response = self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="DELETE",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                return HttpResponse(response=_response, data=None)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)


class AsyncRawCustomFieldsV1Client:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._client_wrapper = client_wrapper

    async def list(
        self, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[CustomFieldsListResultV1]:
        """
        List all custom fields for an organisation.

        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[CustomFieldsListResultV1]
            OK response.
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v1/custom_fields",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsListResultV1,
                    parse_obj_as(
                        type_=CustomFieldsListResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def create(
        self,
        *,
        description: str,
        field_type: CustomFieldsCreatePayloadV1FieldType,
        name: str,
        show_before_closure: bool,
        show_before_creation: bool,
        show_before_update: bool,
        required: typing.Optional[CustomFieldsCreatePayloadV1Required] = OMIT,
        required_v2: typing.Optional[CustomFieldsCreatePayloadV1RequiredV2] = OMIT,
        show_in_announcement_post: typing.Optional[bool] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[CustomFieldsCreateResultV1]:
        """
        Create a new custom field

        Parameters
        ----------
        description : str
            Description of the custom field

        field_type : CustomFieldsCreatePayloadV1FieldType
            Type of custom field

        name : str
            Human readable name for the custom field

        show_before_closure : bool
            Whether a custom field should be shown in the incident resolve modal. If this custom field is required before resolution, but no value has been set for it, the field will be shown in the resolve modal whatever the value of this setting.

        show_before_creation : bool
            Whether a custom field should be shown in the incident creation modal. This must be true if the field is always required.

        show_before_update : bool
            Whether a custom field should be shown in the incident update modal.

        required : typing.Optional[CustomFieldsCreatePayloadV1Required]
            When this custom field must be set during the incident lifecycle. [DEPRECATED: please use required_v2 instead].

        required_v2 : typing.Optional[CustomFieldsCreatePayloadV1RequiredV2]
            When this custom field must be set during the incident lifecycle.

        show_in_announcement_post : typing.Optional[bool]
            Whether a custom field should be shown in the list of fields as part of the announcement post when set.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[CustomFieldsCreateResultV1]
            Created response.
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v1/custom_fields",
            method="POST",
            json={
                "description": description,
                "field_type": field_type,
                "name": name,
                "required": required,
                "required_v2": required_v2,
                "show_before_closure": show_before_closure,
                "show_before_creation": show_before_creation,
                "show_before_update": show_before_update,
                "show_in_announcement_post": show_in_announcement_post,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsCreateResultV1,
                    parse_obj_as(
                        type_=CustomFieldsCreateResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def show(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[CustomFieldsShowResultV1]:
        """
        Get a single custom field.

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[CustomFieldsShowResultV1]
            OK response.
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsShowResultV1,
                    parse_obj_as(
                        type_=CustomFieldsShowResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def update(
        self,
        id: str,
        *,
        description: str,
        name: str,
        show_before_closure: bool,
        show_before_creation: bool,
        show_before_update: bool,
        required: typing.Optional[CustomFieldsUpdatePayloadV1Required] = OMIT,
        required_v2: typing.Optional[CustomFieldsUpdatePayloadV1RequiredV2] = OMIT,
        show_in_announcement_post: typing.Optional[bool] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[CustomFieldsUpdateResultV1]:
        """
        Update the details of a custom field

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        description : str
            Description of the custom field

        name : str
            Human readable name for the custom field

        show_before_closure : bool
            Whether a custom field should be shown in the incident resolve modal. If this custom field is required before resolution, but no value has been set for it, the field will be shown in the resolve modal whatever the value of this setting.

        show_before_creation : bool
            Whether a custom field should be shown in the incident creation modal. This must be true if the field is always required.

        show_before_update : bool
            Whether a custom field should be shown in the incident update modal.

        required : typing.Optional[CustomFieldsUpdatePayloadV1Required]
            When this custom field must be set during the incident lifecycle. [DEPRECATED: please use required_v2 instead].

        required_v2 : typing.Optional[CustomFieldsUpdatePayloadV1RequiredV2]
            When this custom field must be set during the incident lifecycle.

        show_in_announcement_post : typing.Optional[bool]
            Whether a custom field should be shown in the list of fields as part of the announcement post when set.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[CustomFieldsUpdateResultV1]
            OK response.
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="PUT",
            json={
                "description": description,
                "name": name,
                "required": required,
                "required_v2": required_v2,
                "show_before_closure": show_before_closure,
                "show_before_creation": show_before_creation,
                "show_before_update": show_before_update,
                "show_in_announcement_post": show_in_announcement_post,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CustomFieldsUpdateResultV1,
                    parse_obj_as(
                        type_=CustomFieldsUpdateResultV1,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def delete(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[None]:
        """
        Delete a custom field

        Parameters
        ----------
        id : str
            Unique identifier for the custom field

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[None]
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"v1/custom_fields/{jsonable_encoder(id)}",
            method="DELETE",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                return AsyncHttpResponse(response=_response, data=None)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)
